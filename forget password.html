<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Forgot Password</title>
<link rel="icon" href="1ct3.jpg" type="image/x-icon">
<style>
body { 
    font-family: Arial, sans-serif; padding: 30px;
    justify-items: center;
    background-image: url('backc4.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: top;
            min-height: 100vh;
    }
.container { 
    background-color: #ccc;
    padding: 40px;
    border-radius:40px;
    max-width: 400px; margin: auto;
          }
input[type="email"], input[type="password"] {
  width: 100%; padding: 8px; margin: 5px 0 10px 0; box-sizing: border-box;
  border: 1px solid #ccc; border-radius: 4px;
}
button {
  padding: 10px 20px; border: none; border-radius: 4px; background-color: #007bff;
  color: white; cursor: pointer;
}
button:hover { background-color: #0056b3; }
small { color: red; display: block; margin-bottom: 10px; }
.hidden { display: none; }
</style>
</head>
<body>

<div class="container">
  <div id="stepEmail">
    <h2>Forgot Password</h2>
    <p>Enter your email address to receive a password reset link:</p>
    <input type="email" id="email" placeholder="Email address" required>
    <button id="sendLinkBtn">Send Reset Link</button>
    <small id="emailMsg"></small>
  </div>
  <div id="stepConfirm" class="hidden">
    <h2>Check your Email</h2>
    <p>A password reset link has been sent to your email.</p>
    <button id="resetBtn">Reset Password</button>
  </div>
  <div id="stepReset" class="hidden">
    <h2>Reset Password</h2>
    <input type="password" id="newPassword" placeholder="New Password">
    <input type="password" id="confirmPassword" placeholder="Confirm Password">
    <small id="passwordMsg"></small>
    <button id="updatePasswordBtn">Update Password</button>
  </div>
  <div id="stepSuccess" class="hidden">
    <h2>Success!</h2>
    <p>Your password has been reset successfully.</p>
    <button onclick="window.location.href='Login1.html'">Go to Login</button>
  </div>

</div>

<!-- Firebase SDKs for plain HTML/JS -->
<script src="https://www.gstatic.com/firebasejs/9.30.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.30.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.30.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.30.0/firebase-analytics-compat.js"></script>

<script>
  // Your Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyBqSxgQCsUFgIz7eetzb2MMbO_DkHN2Zu8",
    authDomain: "my-portifolio-3f4c5.firebaseapp.com",
    projectId: "my-portifolio-3f4c5",
    storageBucket: "my-portifolio-3f4c5.firebasestorage.app",
    messagingSenderId: "1036053397124",
    appId: "1:1036053397124:web:3bdfea641c319d176a0cd1",
    measurementId: "G-MLBNWNV99Y"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();
  const analytics = firebase.analytics();
</script>


<script>
const stepEmail = document.getElementById("stepEmail");
const stepConfirm = document.getElementById("stepConfirm");
const stepReset = document.getElementById("stepReset");
const stepSuccess = document.getElementById("stepSuccess");

const sendLinkBtn = document.getElementById("sendLinkBtn");
const resetBtn = document.getElementById("resetBtn");
const updatePasswordBtn = document.getElementById("updatePasswordBtn");

const emailInput = document.getElementById("email");
const emailMsg = document.getElementById("emailMsg");

const newPassword = document.getElementById("newPassword");
const confirmPassword = document.getElementById("confirmPassword");
const passwordMsg = document.getElementById("passwordMsg");


const pattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&]).{8,}$/;

// Step 1: Send Reset Link
sendLinkBtn.addEventListener("click", function(){
  if(emailInput.value === "") {
    emailMsg.textContent = "Please enter your email address";
  } else {
    emailMsg.textContent = "";
    stepEmail.classList.add("hidden");
    stepConfirm.classList.remove("hidden");
  }
});

// Step 2: Go to Reset Password
resetBtn.addEventListener("click", function(){
  stepConfirm.classList.add("hidden");
  stepReset.classList.remove("hidden");
});

// Step 3: Update Password
updatePasswordBtn.addEventListener("click", function(){
  if(!pattern.test(newPassword.value)){
    passwordMsg.textContent = "Password must be 8+ chars, include uppercase, lowercase, number, special char";
  } else if(newPassword.value !== confirmPassword.value){
    passwordMsg.textContent = "Passwords do not match";
  } else {
    passwordMsg.textContent = "";
    stepReset.classList.add("hidden");
    stepSuccess.classList.remove("hidden");
  }
});
</script>

</body>
</html>
